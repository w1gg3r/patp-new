{% extends "base.html" %}
{% block title %}Главная страница — ПАТП №1 Вологда{% endblock %}
{% block content %}
<main>
    <!-- Баннер -->
    <section class="hero bg-primary text-white py-5">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <h1 class="display-4 mb-4">Пассажирские автобусные перевозки по Вологде и пригороду</h1>
                    <p class="lead">Занимаемся перевозками в Вологде. Предприятие осуществляет регулярные перевозки пассажиров автобусами в городском и пригородном сообщении.</p>
                    <a href="/routes" class="btn btn-light btn-lg mt-3">Подробнее о маршрутах</a>
                </div>
                <div class="col-md-6 d-none d-md-block">
                    <img src="{{ url_for('static', filename='images/news-item-3.png') }}" alt="Автобусы ПАТП №1" class="img-fluid rounded shadow">
                </div>
            </div>
        </div>
    </section>

    <!-- Статистика -->
    <section class="stats bg-primary py-5">
        <div class="container">
            <div class="row g-4 justify-content-center">
                <div class="col-md-4">
                    <div class="stat-box p-4 text-center bg-white shadow-sm rounded">
                        <h2 class="num fs-1 fw-bold">15</h2>
                        <p class="text-2">маршрутов</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="stat-box p-4 text-center bg-white shadow-sm rounded">
                        <h2 class="num fs-1 fw-bold">178 км</h2>
                        <p class="text-2">протяженность маршрутной сети</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="stat-box p-4 text-center bg-white shadow-sm rounded">
                        <h2 class="num fs-1 fw-bold">130</h2>
                        <p class="text-2">автобусов в парке</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Акцентный баннер -->
    <section class="ad-banner text-white p-4">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h2 class="fs-4">Забронируйте автобус на праздники со скидкой 20%</h2>
                    <p class="fs-5">Успейте воспользоваться предложением до конца января!</p>
                </div>
                <div class="col-md-4 text-end">
                    <a href="/service" class="btn btn-outline-light btn-lg">Подробнее</a>
                </div>
            </div>
        </div>
    </section>  

<!-- Преимущества -->
    <section class="advantages py-5">
        <div class="container text-left">
            <h2 class="mb-5">Наши преимущества</h2>
            <div class="row g-4 justify-content-center text-center">
                <div class="col-md-3">
                    <div class="advantage-card p-4 rounded shadow-sm h-100">
                        <div class="icon-box mb-3">
                            <i class="bi bi-bus-front fs-1 text-primary"></i>
                        </div>
                        <h4 class="mb-3">Собственный автопарк</h4>
                        <p>У нас современные и комфортные автобусы, регулярно проходящие технический осмотр.</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="advantage-card p-4 rounded shadow-sm h-100">
                        <div class="icon-box mb-3">
                            <i class="bi bi-calendar-check fs-1 text-primary"></i>
                        </div>
                        <h4 class="mb-3">Онлайн-бронирование</h4>
                        <p>Забронируйте место онлайн без очередей и звонков в удобное для вас время.</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="advantage-card p-4 rounded shadow-sm h-100">
                        <div class="icon-box mb-3">
                            <i class="bi bi-person-badge fs-1 text-primary"></i>
                        </div>
                        <h4 class="mb-3">Квалифицированные водители</h4>
                        <p>Все наши водители имеют большой опыт работы и проходят ежегодную переподготовку.</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="advantage-card p-4 rounded shadow-sm h-100">
                        <div class="icon-box mb-3">
                            <i class="bi bi-chat-dots fs-1 text-primary"></i>
                        </div>
                        <h4 class="mb-3">Поддержка 24/7</h4>
                        <p>Мы всегда на связи: вы можете оставить заявку или задать вопрос в любое время.</p>
                    </div>
                </div>
            </div>

            <!-- Дополнительный ряд с другими преимуществами -->
            <div class="mt-5 row g-4 justify-content-center text-center">
                <div class="col-md-3">
                    <div class="advantage-card p-4 rounded shadow-sm h-100">
                        <div class="icon-box mb-3">
                            <i class="bi bi-clock-history fs-1 text-primary"></i>
                        </div>
                        <h4 class="mb-3">Работаем давно</h4>
                        <p>Более 20 лет перевозок по Вологде и области. Опыт — наш главный плюс.</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="advantage-card p-4 rounded shadow-sm h-100">
                        <div class="icon-box mb-3">
                            <i class="bi bi-star fs-1 text-primary"></i>
                        </div>
                        <h4 class="mb-3">Высокий рейтинг</h4>
                        <p>Пользователи оценивают нас положительно за надёжность и пунктуальность.</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="advantage-card p-4 rounded shadow-sm h-100">
                        <div class="icon-box mb-3">
                            <i class="bi bi-shield-check fs-1 text-primary"></i>
                        </div>
                        <h4 class="mb-3">Гарантия безопасности</h4>
                        <p>Все маршруты соответствуют ГОСТам и правилам дорожного движения.</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="advantage-card p-4 rounded shadow-sm h-100">
                        <div class="icon-box mb-3">
                            <i class="bi bi-truck fs-1 text-primary"></i>
                        </div>
                        <h4 class="mb-3">Широкая маршрутная сеть</h4>
                        <p>Более 15 маршрутов по городу и пригороду. Найдётся путь до любой точки.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>


 <!-- Новости -->
<section class="news py-5 bg-light">
    <div class="container">
        <!-- Заголовок и навигация -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="text-left mb-0">Новости</h2>
            
            <!-- Кнопки навигации слайдера рядом с заголовком -->
            <div class="d-flex gap-2">
                <div class="swiper-button-prev custom-swiper-button" id="news-prev">
                    <i class="bi bi-chevron-left"></i>
                </div>
                <div class="swiper-button-next custom-swiper-button" id="news-next">
                    <i class="bi bi-chevron-right"></i>
                </div>
            </div>
        </div>

        {% if news and news|length > 0 %}
        <!-- Слайдер с активным центральным слайдом -->
        <div class="swiper-container mySwiper">
            <div class="swiper-wrapper">
                {% for post in news %}
                <div class="swiper-slide">
                    <div class="card h-100 border-0">
                        <div class="card-img-wrapper">
                            {% if post.image %}
                            <img src="{{ url_for('static', filename='images/' + post.image) }}" 
                                 class="card-img-top"
                                 alt="{{ post.title }}"
                                 style="height: 200px; object-fit: cover;">
                            {% else %}
                            <img src="{{ url_for('static', filename='images/placeholder.png') }}"
                                 class="card-img-top"
                                 alt="{{ post.title }}"
                                 style="height: 200px; object-fit: cover;">
                            {% endif %}
                            <div class="date-badge">{{ post.created_at[:10] }}</div>
                        </div>
                        
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">{{ post.title }}</h5>
                            <p class="card-text flex-grow-1">{{ post.content[:100] }}...</p>
                            <a href="/news/{{ post.id }}" class="btn btn-primary btn-sm mt-2">Читать далее</a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            
            <!-- Пагинация -->
            <div class="swiper-pagination"></div>
        </div>
        {% else %}
        <div class="alert alert-info">
            <p>Новости скоро появятся. Следите за обновлениями!</p>
        </div>
        {% endif %}
    </div>
</section>


    <!-- Обратная связь -->
    <section class="contact-form py-5 bg-light">
        <div class="container">
            <h2 class="text-left mb-5">Обратная связь</h2>
            <form action="/submit-feedback" method="POST">
                <div class="row g-3">
                    <div class="col-md-6">
                        <label for="name" class="form-label">Имя*</label>
                        <input type="text" id="name" name="name" placeholder="Иван" class="form-control" required>
                    </div>
                    <div class="col-md-6">
                        <label for="email" class="form-label">Email*</label>
                        <input type="email" id="email" name="email" placeholder="ivanov@email.ru" class="form-control" required>
                    </div>
                    <div class="col-md-6">
                        <label for="telephone" class="form-label">Телефон*</label>
                        <input type="tel" id="telephone" name="telephone" placeholder="+7 (900) 000-00-00" class="form-control" required>
                    </div>
                    <div class="col-md-6">
                        <label for="subject" class="form-label">Тема</label>
                        <input type="text" id="subject" name="subject" placeholder="Тема вашего обращения" class="form-control">
                    </div>
                    <div class="col-12">
                        <label for="message" class="form-label">Ваш вопрос*</label>
                        <textarea id="message" name="message" class="form-control" rows="12" required></textarea>
                    </div>
                    <div class="col-12 form-check mt-3">
                        <input class="form-check-input" type="checkbox" id="privacy-check" name="consent" required>
                        <label class="form-check-label text-muted" for="consent">
                            Я согласен(а) на обработку персональных данных
                            <a href="{{ url_for('static', filename='uploads/mupatp_politic.pdf') }}" target="_blank" class="text-decoration-underline">
                                политике конфиденциальности
                            </a>
                        </label>
                    </div>
                    <div class="col-12 text-start mt-3">
                        <button type="submit" class="btn btn-primary px-4">Отправить</button>
                    </div>
                </div>
            </form>
        </div>
    </section>
</main>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Отображаем отладочную информацию
        const debugInfo = document.getElementById('debug-info');
        if (debugInfo) {
            debugInfo.style.display = 'block';
        }
        
        // Проверяем наличие элемента слайдера
        const swiperEl = document.querySelector('.mySwiper');
        console.log('Swiper element exists:', !!swiperEl);
        
        // Проверяем количество слайдов
        if (swiperEl) {
            const slides = swiperEl.querySelectorAll('.swiper-slide');
            console.log('Number of slides:', slides.length);
            
            // Выводим информацию о каждом слайде
            slides.forEach((slide, index) => {
                console.log(`Slide ${index} content:`, slide.innerHTML.substring(0, 100) + '...');
            });
        }
    });
</script>
{% endblock %}